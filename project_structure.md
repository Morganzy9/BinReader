### Принцип работы

#### Введение

BinReader – это распределённый сервис, который определяет банк по БИНу карты (Банковский Идентификационный Номер). Сервис принимает номер карты на вход и возвращает название банка, которому принадлежит данная карта.

#### Архитектура

Сервис состоит из следующих основных компонентов:

1. **Django-приложение:** Основной серверный компонент, который обрабатывает запросы пользователей.
2. **PostgreSQL:** База данных для хранения информации о БИНах и связанных с ними банках.
3. **Docker:** Используется для контейнеризации приложения и базы данных для упрощения развертывания и управления.
4. **Redis (опционально):** Кэширование запросов для ускорения ответа.

#### Процесс работы

1. **Запрос на определение банка по БИНу:**
   - Пользователь отправляет HTTP-запрос на конечную точку сервиса с номером карты.
   - Пример запроса: `GET http://localhost:8000/bin/1234567890123456/`
2. **Извлечение БИН-а:**
   - Из номера карты извлекаются первые 6 цифр, которые являются БИНом.
3. **Проверка в локальной базе данных:**
   - Сначала сервис проверяет наличие БИН-а в локальной базе данных PostgreSQL.
   - Если БИН найден, возвращается название банка.
4. **Запрос к сторонним сервисам:**
   - Если БИН не найден в локальной базе данных, сервис отправляет запрос к сторонним сервисам для получения информации о банке.
   - Примеры сторонних сервисов могут включать BINList или другие API для проверки БИНов.
5. **Сохранение данных в локальной базе данных:**
   - Полученная информация о банке сохраняется в локальной базе данных для ускорения последующих запросов.
   - Это позволяет сервису "запомнить" информацию о новых БИНах.
6. **Возвращение ответа пользователю:**
   - Сервис возвращает пользователю название банка в формате JSON.

#### Кэширование 

Для улучшения производительности сервис может использовать Redis для кэширования запросов. Это позволяет сократить время ответа на часто повторяющиеся запросы.

#### Конфигурация и развертывание

1. **Настройка среды:**
   - Все необходимые переменные среды, такие как `SECRET_KEY`, `DATABASE_NAME`, `DATABASE_USER`, `DATABASE_PASSWORD`, задаются в файле `.env`.
2. **Использование Docker:**
   - Для упрощения развертывания и управления сервисом используется Docker.
   - Docker Compose файл содержит конфигурацию для веб-сервиса и базы данных PostgreSQL.
3. **Нагрузочное тестирование:**
   - Сервис тестируется на способность обрабатывать 1000 запросов в секунду с максимальным временем отклика 500 мс (95-й процентиль) с использованием инструмента k6.


